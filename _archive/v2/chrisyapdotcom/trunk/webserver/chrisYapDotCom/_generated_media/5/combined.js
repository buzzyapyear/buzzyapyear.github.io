window.site_data={};window.site_data.settings={CY_MEDIA_URL:"http://media.chrisyap.com/",MEDIA_URL:"/media/5/"};if(!Array.prototype.indexOf){Array.prototype.indexOf=function(b){var a=this.length>>>0;var c=Number(arguments[1])||0;c=(c<0)?Math.ceil(c):Math.floor(c);if(c<0){c+=a}for(;c<a;c++){if(c in this&&this[c]===b){return c}}return -1}}if(!Array.prototype.lastIndexOf){Array.prototype.lastIndexOf=function(b){var a=this.length;var c=Number(arguments[1]);if(isNaN(c)){c=a-1}else{c=(c<0)?Math.ceil(c):Math.floor(c);if(c<0){c+=a}else{if(c>=a){c=a-1}}}for(;c>-1;c--){if(c in this&&this[c]===b){return c}}return -1}}if(!Array.prototype.every){Array.prototype.every=function(b){var a=this.length>>>0;if(typeof b!="function"){throw new TypeError()}var d=arguments[1];for(var c=0;c<a;c++){if(c in this&&!b.call(d,this[c],c,this)){return false}}return true}}if(!Array.prototype.filter){Array.prototype.filter=function(b){var a=this.length>>>0;if(typeof b!="function"){throw new TypeError()}var e=new Array();var d=arguments[1];for(var c=0;c<a;c++){if(c in this){var f=this[c];if(b.call(d,f,c,this)){e.push(f)}}}return e}}if(!Array.prototype.forEach){Array.prototype.forEach=function(b){var a=this.length>>>0;if(typeof b!="function"){throw new TypeError()}var d=arguments[1];for(var c=0;c<a;c++){if(c in this){b.call(d,this[c],c,this)}}}}if(!Array.prototype.map){Array.prototype.map=function(b){var a=this.length>>>0;if(typeof b!="function"){throw new TypeError()}var e=new Array(a);var d=arguments[1];for(var c=0;c<a;c++){if(c in this){e[c]=b.call(d,this[c],c,this)}}return e}}if(!Array.prototype.some){Array.prototype.some=function(b){var d=0,a=this.length>>>0;if(typeof b!="function"){throw new TypeError()}var c=arguments[1];for(;d<a;d++){if(d in this&&b.call(c,this[d],d,this)){return true}}return false}}if(!Array.prototype.reduce){Array.prototype.reduce=function(b){var a=this.length>>>0;if(typeof b!="function"){throw new TypeError()}if(a==0&&arguments.length==1){throw new TypeError()}var c=0;if(arguments.length>=2){var d=arguments[1]}else{do{if(c in this){d=this[c++];break}if(++c>=a){throw new TypeError()}}while(true)}for(;c<a;c++){if(c in this){d=b.call(null,d,this[c],c,this)}}return d}}if(!Array.prototype.reduceRight){Array.prototype.reduceRight=function(b){var a=this.length>>>0;if(typeof b!="function"){throw new TypeError()}if(a==0&&arguments.length==1){throw new TypeError()}var c=a-1;if(arguments.length>=2){var d=arguments[1]}else{do{if(c in this){d=this[c--];break}if(--c<0){throw new TypeError()}}while(true)}for(;c>=0;c--){if(c in this){d=b.call(null,d,this[c],c,this)}}return d}}Array.prototype.extend=function(a){for(var b=0;b<a.length;b++){this.push(a[b])}};Array.create=function(a){return Array.prototype.slice.call(a,0)};Array.zip=function(){var b=[];for(var c=0;c<arguments[0].length;c++){var d=[];for(var a=0;a<arguments.length;a++){d.push(arguments[a][c])}b.push(d)}return b};Array.generate=function(d,e){var b=[];for(var c=0;c<d;c++){b.push(e(c))}return b};Function.prototype.bindScope=function(){var d=Array.prototype.slice;var a=d.call(arguments,0);var b=this;var c=a.shift();return function(){var h=d.call(a,0);var g=d.call(arguments,0);var f=h.length,e=g.length;while(e--){h[f+e]=g[e]}return b.apply(c,h)}};Function.prototype.loop=function(b){for(var a=0;a<b;a++){this(a)}};String.prototype.truncate=function(a){if(this.length<=a){return this}return this.substr(0,a-3)+"..."};function E(){var c=$(document.createElement(arguments[0]));if(arguments.length>1){var a=Array.prototype.slice.call(arguments,0);a.shift();if(typeof a[0]=="string"){c.addClass(a.shift())}for(var b=0;b<a.length;b++){if(a[b]){if(!a[b].jquery&&typeof a[b].length!="undefined"){a[b].forEach(function(d){c.append(d)})}else{c.append(a[b])}}}}return c}function T(a){return $(document.createTextNode(a))}$.fn.appendlist=function(a){if(a.length>0){var b=document.createDocumentFragment();a.forEach(function(c){if(c){if(c.jquery){c=c.get(0)}b.appendChild(c)}});this.get(0).appendChild(b)}return this};var Event=function(){this.listeners=[]};Event.prototype={bind:function(a){if(this.listeners.indexOf(a)<0){this.listeners.push(a)}},fire:function(){var a=Array.prototype.slice.call(arguments,0);$.each(this.listeners,function(){this.apply(null,a)})}};if(!window.console){window.console={log:function(){}}}number_format=function(b){nStr=b+"";x=nStr.split(".");x1=x[0];x2=x.length>1?"."+x[1]:"";var a=/(\d+)(\d{3})/;while(a.test(x1)){x1=x1.replace(a,"$1,$2")}return x1+x2};jQuery.extend({getURLParam:function(a){var i="";var e=window.location.href;var j=false;var f=a+"=";var c=f.length;if(e.indexOf("?")>-1){var g=e.substr(e.indexOf("?")+1);var d=g.split("&");for(var b=0;b<d.length;b++){if(d[b].substr(0,c)==f){var h=d[b].split("=");i=h[1];j=true;break}}}if(j==false){return null}return i}});jQuery.isJSON=function(a){if(jQuery.trim(a)==""){return false}a=a.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"/g,"");return(/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/).test(a)};if(typeof cy=="undefined"){cy={}}function preloadImages(b){document.imageArray=new Array(b.length);for(var a=0;a<b.length;a++){document.imageArray[a]=new Image;document.imageArray[a].src=b[a]}}function imgSwap(b,a){}Array.prototype.remove=function(c,b){var a=this.slice((b||c)+1||this.length);this.length=c<0?this.length+c:c;return this.push.apply(this,a)};(function(a){a.fn.shuffle=function(){return this.each(function(){var b=a(this).children();return(b.length)?a(this).html(a.shuffle(b)):this})};a.shuffle=function(c){for(var d,b,e=c.length;e;d=parseInt(Math.random()*e),b=c[--e],c[e]=c[d],c[d]=b){}return c}})(jQuery);jQuery.cookie=function(b,j,m){if(typeof j!="undefined"){m=m||{};if(j===null){j="";m.expires=-1}var e="";if(m.expires&&(typeof m.expires=="number"||m.expires.toUTCString)){var f;if(typeof m.expires=="number"){f=new Date();f.setTime(f.getTime()+(m.expires*24*60*60*1000))}else{f=m.expires}e="; expires="+f.toUTCString()}var l=m.path?"; path="+(m.path):"";var g=m.domain?"; domain="+(m.domain):"";var a=m.secure?"; secure":"";document.cookie=[b,"=",encodeURIComponent(j),e,l,g,a].join("")}else{var d=null;if(document.cookie&&document.cookie!=""){var k=document.cookie.split(";");for(var h=0;h<k.length;h++){var c=jQuery.trim(k[h]);if(c.substring(0,b.length+1)==(b+"=")){d=decodeURIComponent(c.substring(b.length+1));break}}}return d}};cy.CYController=function(){};cy.CYController.prototype={embedFlickr:function(a){this.flickrOptions={apiKey:"60cda4a2cdaf876686b71e82dfde3265",userID:"52033098%40N00",tags:"portfolioSite",itemsToShow:5,timeToWait:0,flickrSize:"Medium",imgSize:248};$.extend(this.flickrOptions,a);var b=["http://api.flickr.com/services/rest/?format=json&jsoncallback=?&method=flickr.photos.search&tags=",this.flickrOptions.tags,"&user_id=",this.flickrOptions.userID,"&per_page=100&api_key=",this.flickrOptions.apiKey].join("");$.getJSON(b,function(c){this.constructFlickrItems(c)}.bindScope(this))},constructFlickrItems:function(f){var e=[];var b=$("#flickrContainer ul");if(!cy.appVars.isMobile){var a=E("li","module marker",E("h1","hide",T("Flickr")),E("img").attr({src:[cy.appVars.mediaUrl,"cydotcom/images/markerFlickr.png"].join(""),alt:"Flickr",title:"Flickr",border:"0"})).attr("id","markerFlickr");$(b).append(a)}for(var d=0;d<this.flickrOptions.itemsToShow;d++){var g=Math.floor(Math.random()*f.photos.photo.length+1);var c=f.photos.photo[g];e.push(c)}$.each(e,function(k,j){var h=["http://api.flickr.com/services/rest/?format=json&jsoncallback=?&method=flickr.photos.getSizes&photo_id=",j.id,"&api_key=",this.flickrOptions.apiKey].join("");$.getJSON(h,function(i){var m=["http://farm",j.farm+".static.flickr.com/"+j.server+"/"+j.id+"_"+j.secret+".jpg"].join("");var l=i.sizes.size;$.each(l,function(p,o){if(o.label==this.flickrOptions.flickrSize){var n=E("img","flickrPhoto").attr({src:m,border:"0"});if(o.width>o.height){$(n).attr("height",this.flickrOptions.imgSize).addClass("flickrHoriz")}else{$(n).attr("width",this.flickrOptions.imgSize).addClass("flickrVert")}var q=E("a",n).attr("title",j.title);if(cy.appVars.isMobile){$(q).attr({href:["/mobileFlickrDialog/",j.farm,"/",j.server,"/",j.id,"/",j.secret].join(""),"data-rel":"dialog","data-transition":"pop"})}else{$(q).attr({href:m,rel:"lightbox['flickr']"})}$(b).append(E("li",q))}}.bindScope(this))}.bindScope(this))}.bindScope(this))},embedTumblr:function(){this.tumblrSettings={userName:"buzzyapyear",itemsToShow:6,tumblrContainer:"tumblrContainer",imageSize:250,shortPublishDate:true,timeToWait:0};var a=["http://",this.tumblrSettings.userName,".tumblr.com/api/read/json?callback=?&tagged=portfolioSite&num=",this.tumblrSettings.itemsToShow].join("");$.getJSON(a,function(b){this.constructTumblrItems(b)}.bindScope(this))},constructTumblrItems:function(p){var b=p.posts;var g=$("#tumblrContainer ul");if(!cy.appVars.isMobile){var d=E("li","module marker",E("h1","hide",T("Tumblr")),E("img").attr({src:[cy.appVars.mediaUrl,"cydotcom/images/markerTumblr.png"].join(""),alt:"Tumblr",title:"Tumblr",border:"0"})).attr("id","markerTumblr");$(g).append(d)}for(var o=0,e=b.length;o<e;o=o+1){var n=b[o];if(/regular|photo|quote|link|conversation/.test(n.type)){var j=E("div","tumblrPost");switch(n.type){case"photo":var u=E("img").attr({src:n[["photo-url-",this.tumblrSettings.imageSize].join("")],border:0});var c=E("a",u).attr({href:n.url,target:"_blank"});var h=n["photo-caption"];$(j).append(c).append(h);break;case"quote":var r=E("span","quote",T(n["quote-text"]));var k=E("span","source",T("- ")).append(n["quote-source"]);$(j).addClass("tumblrQuote").append(r).append(k);break;case"link":var c=E("a",T(n["link-text"])).attr({href:n["link-url"],target:"_blank"});var m=n["link-description"];$(j).append(c).append(m);break;case"conversation":var t=E("a",T(n["conversation-title"])).attr({href:n.url,target:"_blank"});var s=n.conversation;var q=E("ul");$.each(s,function(y,z){var w=E("strong",T(z.name));var v=T(z.phrase);convoList.append(E("li",w,v))}.bindScope(this));$(j).addClass("tumblrConversation").append(t).append(q);break;case"regular":var t=E("a",T(n["regular-title"])).attr({href:n["url-with-slug"],target:"_blank"});var f=n["regular-body"];$(j).addClass("tumblrRegular").append(t).append(f);break;default:break}var l=E("a","launch",T("More")).attr({href:n.url,target:"_blank"});var a=E("div",l);$(g).append(E("li","module",j,a))}}},getDocHeight:function(){var a=document;return Math.max(Math.max(a.body.scrollHeight,a.documentElement.scrollHeight),Math.max(a.body.offsetHeight,a.documentElement.offsetHeight),Math.max(a.body.clientHeight,a.documentElement.clientHeight))}};(function(bu,aT){var bc={version:"3.0.3"};var bi=navigator.userAgent.toLowerCase();if(bi.indexOf("windows")>-1||bi.indexOf("win32")>-1){bc.isWindows=true}else{if(bi.indexOf("macintosh")>-1||bi.indexOf("mac os x")>-1){bc.isMac=true}else{if(bi.indexOf("linux")>-1){bc.isLinux=true}}}bc.isIE=bi.indexOf("msie")>-1;bc.isIE6=bi.indexOf("msie 6")>-1;bc.isIE7=bi.indexOf("msie 7")>-1;bc.isGecko=bi.indexOf("gecko")>-1&&bi.indexOf("safari")==-1;bc.isWebKit=bi.indexOf("applewebkit/")>-1;var bP=/#(.+)$/,bL=/^(light|shadow)box\[(.*?)\]/i,bk=/\s*([a-z_]*?)\s*=\s*(.+)\s*/,aY=/[0-9a-z]+$/i,bT=/(.+\/)shadowbox\.js/i;var bz=false,a3=false,aS={},K=0,bb,bB;bc.current=-1;bc.dimensions=null;bc.ease=function(a){return 1+Math.pow(a-1,3)};bc.errorInfo={fla:{name:"Flash",url:"http://www.adobe.com/products/flashplayer/"},qt:{name:"QuickTime",url:"http://www.apple.com/quicktime/download/"},wmp:{name:"Windows Media Player",url:"http://www.microsoft.com/windows/windowsmedia/"},f4m:{name:"Flip4Mac",url:"http://www.flip4mac.com/wmv_download.htm"}};bc.gallery=[];bc.onReady=bH;bc.path=null;bc.player=null;bc.playerId="sb-player";bc.options={animate:true,animateFade:true,autoplayMovies:true,continuous:false,enableKeys:true,flashParams:{bgcolor:"#000000",allowfullscreen:true},flashVars:{},flashVersion:"9.0.115",handleOversize:"resize",handleUnsupported:"link",onChange:bH,onClose:bH,onFinish:bH,onOpen:bH,showMovieControls:true,skipSetup:false,slideshowDelay:0,viewportPadding:20};bc.getCurrent=function(){return bc.current>-1?bc.gallery[bc.current]:null};bc.hasNext=function(){return bc.gallery.length>1&&(bc.current!=bc.gallery.length-1||bc.options.continuous)};bc.isOpen=function(){return bz};bc.isPaused=function(){return bB=="pause"};bc.applyOptions=function(a){aS=bU({},bc.options);bU(bc.options,a)};bc.revertOptions=function(){bU(bc.options,aS)};bc.init=function(c,e){if(a3){return}a3=true;if(bc.skin.options){bU(bc.options,bc.skin.options)}if(c){bU(bc.options,c)}if(!bc.path){var f,d=document.getElementsByTagName("script");for(var a=0,b=d.length;a<b;++a){f=bT.exec(d[a].src);if(f){bc.path=f[1];break}}}if(e){bc.onReady=e}bd()};bc.open=function(b){if(bz){return}var a=bc.makeGallery(b);bc.gallery=a[0];bc.current=a[1];b=bc.getCurrent();if(b==null){return}bc.applyOptions(b.options||{});bn();if(bc.gallery.length){b=bc.getCurrent();if(bc.options.onOpen(b)===false){return}bz=true;bc.skin.onOpen(b,a1)}};bc.close=function(){if(!bz){return}bz=false;if(bc.player){bc.player.remove();bc.player=null}if(typeof bB=="number"){clearTimeout(bB);bB=null}K=0;bA(false);bc.options.onClose(bc.getCurrent());bc.skin.onClose();bc.revertOptions()};bc.play=function(){if(!bc.hasNext()){return}if(!K){K=bc.options.slideshowDelay*1000}if(K){bb=bq();bB=setTimeout(function(){K=bb=0;bc.next()},K);if(bc.skin.onPlay){bc.skin.onPlay()}}};bc.pause=function(){if(typeof bB!="number"){return}K=Math.max(0,K-(bq()-bb));if(K){clearTimeout(bB);bB="pause";if(bc.skin.onPause){bc.skin.onPause()}}};bc.change=function(a){if(!(a in bc.gallery)){if(bc.options.continuous){a=(a<0?bc.gallery.length+a:0);if(!(a in bc.gallery)){return}}else{return}}bc.current=a;if(typeof bB=="number"){clearTimeout(bB);bB=null;K=bb=0}bc.options.onChange(bc.getCurrent());a1(true)};bc.next=function(){bc.change(bc.current+1)};bc.previous=function(){bc.change(bc.current-1)};bc.setDimensions=function(f,a,h,g,b,i,k,n){var l=f,c=a;var m=2*k+b;if(f+m>h){f=h-m}var d=2*k+i;if(a+d>g){a=g-d}var e=(l-f)/l,j=(c-a)/c,o=(e>0||j>0);if(n&&o){if(e>j){a=Math.round((c/l)*f)}else{if(j>e){f=Math.round((l/c)*a)}}}bc.dimensions={height:f+b,width:a+i,innerHeight:f,innerWidth:a,top:Math.floor((h-(f+m))/2+k),left:Math.floor((g-(a+d))/2+k),oversized:o};return bc.dimensions};bc.makeGallery=function(f){var c=[],a=-1;if(typeof f=="string"){f=[f]}if(typeof f.length=="number"){bR(f,function(h,g){if(g.content){c[h]=g}else{c[h]={content:g}}});a=0}else{if(f.tagName){var d=bc.getCache(f);f=d?d:bc.makeObject(f)}if(f.gallery){c=[];var e;for(var b in bc.cache){e=bc.cache[b];if(e.gallery&&e.gallery==f.gallery){if(a==-1&&e.content==f.content){a=c.length}c.push(e)}}if(a==-1){c.unshift(f);a=0}}else{c=[f];a=0}}bR(c,function(h,g){c[h]=bU({},g)});return[c,a]};bc.makeObject=function(a,c){var e={content:a.href,title:a.getAttribute("title")||"",link:a};if(c){c=bU({},c);bR(["player","title","height","width","gallery"],function(g,f){if(typeof c[f]!="undefined"){e[f]=c[f];delete c[f]}});e.options=c}else{e.options={}}if(!e.player){e.player=bc.getPlayer(e.content)}var b=a.getAttribute("rel");if(b){var d=b.match(bL);if(d){e.gallery=escape(d[2])}bR(b.split(";"),function(g,f){d=f.match(bk);if(d){e[d[1]]=d[2]}})}return e};bc.getPlayer=function(c){if(c.indexOf("#")>-1&&c.indexOf(document.location.href)==0){return"inline"}var a=c.indexOf("?");if(a>-1){c=c.substring(0,a)}var d,b=c.match(aY);if(b){d=b[0].toLowerCase()}if(d){if(bc.img&&bc.img.ext.indexOf(d)>-1){return"img"}if(bc.swf&&bc.swf.ext.indexOf(d)>-1){return"swf"}if(bc.flv&&bc.flv.ext.indexOf(d)>-1){return"flv"}if(bc.qt&&bc.qt.ext.indexOf(d)>-1){if(bc.wmp&&bc.wmp.ext.indexOf(d)>-1){return"qtwmp"}else{return"qt"}}if(bc.wmp&&bc.wmp.ext.indexOf(d)>-1){return"wmp"}}return"iframe"};function bn(){var c=bc.errorInfo,b=bc.plugins,k,j,g,d,h,e,i,f;for(var a=0;a<bc.gallery.length;++a){k=bc.gallery[a];j=false;g=null;switch(k.player){case"flv":case"swf":if(!b.fla){g="fla"}break;case"qt":if(!b.qt){g="qt"}break;case"wmp":if(bc.isMac){if(b.qt&&b.f4m){k.player="qt"}else{g="qtf4m"}}else{if(!b.wmp){g="wmp"}}break;case"qtwmp":if(b.qt){k.player="qt"}else{if(b.wmp){k.player="wmp"}else{g="qtwmp"}}break}if(g){if(bc.options.handleUnsupported=="link"){switch(g){case"qtf4m":h="shared";e=[c.qt.url,c.qt.name,c.f4m.url,c.f4m.name];break;case"qtwmp":h="either";e=[c.qt.url,c.qt.name,c.wmp.url,c.wmp.name];break;default:h="single";e=[c[g].url,c[g].name]}k.player="html";k.content='<div class="sb-message">'+aL(bc.lang.errors[h],e)+"</div>"}else{j=true}}else{if(k.player=="inline"){d=bP.exec(k.content);if(d){i=bN(d[1]);if(i){k.content=i.innerHTML}else{j=true}}else{j=true}}else{if(k.player=="swf"||k.player=="flv"){f=(k.options&&k.options.flashVersion)||bc.options.flashVersion;if(bc.flash&&!bc.flash.hasFlashPlayerVersion(f)){k.width=310;k.height=177}}}}if(j){bc.gallery.splice(a,1);if(a<bc.current){--bc.current}else{if(a==bc.current){bc.current=a>0?a-1:a}}--a}}}function bA(a){if(!bc.options.enableKeys){return}(a?bp:bg)(document,"keydown",bD)}function bD(b){if(b.metaKey||b.shiftKey||b.altKey||b.ctrlKey){return}var c=aI(b),a;switch(c){case 81:case 88:case 27:a=bc.close;break;case 37:a=bc.previous;break;case 39:a=bc.next;break;case 32:a=typeof bB=="number"?bc.pause:bc.play;break}if(a){aQ(b);a()}}function a1(e){bA(false);var f=bc.getCurrent();var c=(f.player=="inline"?"html":f.player);if(typeof bc[c]!="function"){throw"unknown player "+c}if(e){bc.player.remove();bc.revertOptions();bc.applyOptions(f.options||{})}bc.player=new bc[c](f,bc.playerId);if(bc.gallery.length>1){var a=bc.gallery[bc.current+1]||bc.gallery[0];if(a.player=="img"){var d=new Image();d.src=a.content}var g=bc.gallery[bc.current-1]||bc.gallery[bc.gallery.length-1];if(g.player=="img"){var b=new Image();b.src=g.content}}bc.skin.onLoad(e,a7)}function a7(){if(!bz){return}if(typeof bc.player.ready!="undefined"){var a=setInterval(function(){if(bz){if(bc.player.ready){clearInterval(a);a=null;bc.skin.onReady(aZ)}}else{clearInterval(a);a=null}},10)}else{bc.skin.onReady(aZ)}}function aZ(){if(!bz){return}bc.player.append(bc.skin.body,bc.dimensions);bc.skin.onShow(bj)}function bj(){if(!bz){return}if(bc.player.onLoad){bc.player.onLoad()}bc.options.onFinish(bc.getCurrent());if(!bc.isPaused()){bc.play()}bA(true)}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(c,b){var a=this.length>>>0;b=b||0;if(b<0){b+=a}for(;b<a;++b){if(b in this&&this[b]===c){return b}}return -1}}function bq(){return(new Date).getTime()}function bU(b,a){for(var c in a){b[c]=a[c]}return b}function bR(a,e){var d=0,c=a.length;for(var b=a[0];d<c&&e.call(b,d,b)!==false;b=a[++d]){}}function aL(b,a){return b.replace(/\{(\w+?)\}/g,function(d,c){return a[c]})}function bH(){}function bN(a){return document.getElementById(a)}function bv(a){a.parentNode.removeChild(a)}var aW=true,aG=true;function a0(){var a=document.body,b=document.createElement("div");aW=typeof b.style.opacity==="string";b.style.position="fixed";b.style.margin=0;b.style.top="20px";a.appendChild(b,a.firstChild);aG=b.offsetTop==20;a.removeChild(b)}bc.getStyle=(function(){var a=/opacity=([^)]*)/,b=document.defaultView&&document.defaultView.getComputedStyle;return function(e,f){var c;if(!aW&&f=="opacity"&&e.currentStyle){c=a.test(e.currentStyle.filter||"")?(parseFloat(RegExp.$1)/100)+"":"";return c===""?"1":c}if(b){var d=b(e,null);if(d){c=d[f]}if(f=="opacity"&&c==""){c="1"}}else{c=e.currentStyle[f]}return c}})();bc.appendHTML=function(c,d){if(c.insertAdjacentHTML){c.insertAdjacentHTML("BeforeEnd",d)}else{if(c.lastChild){var b=c.ownerDocument.createRange();b.setStartAfter(c.lastChild);var a=b.createContextualFragment(d);c.appendChild(a)}else{c.innerHTML=d}}};bc.getWindowSize=function(a){if(document.compatMode==="CSS1Compat"){return document.documentElement["client"+a]}return document.body["client"+a]};bc.setOpacity=function(b,a){var c=b.style;if(aW){c.opacity=(a==1?"":a)}else{c.zoom=1;if(a==1){if(typeof c.filter=="string"&&(/alpha/i).test(c.filter)){c.filter=c.filter.replace(/\s*[\w\.]*alpha\([^\)]*\);?/gi,"")}}else{c.filter=(c.filter||"").replace(/\s*[\w\.]*alpha\([^\)]*\)/gi,"")+" alpha(opacity="+(a*100)+")"}}};bc.clearOpacity=function(a){bc.setOpacity(a,1)};function aP(a){return a.target}function a8(a){return[a.pageX,a.pageY]}function aQ(a){a.preventDefault()}function aI(a){return a.keyCode}function bp(b,c,a){jQuery(b).bind(c,a)}function bg(b,c,a){jQuery(b).unbind(c,a)}jQuery.fn.shadowbox=function(a){return this.each(function(){var c=jQuery(this);var b=jQuery.extend({},a||{},jQuery.metadata?c.metadata():jQuery.meta?c.data():{});var d=this.className||"";b.width=parseInt((d.match(/w:(\d+)/)||[])[1])||b.width;b.height=parseInt((d.match(/h:(\d+)/)||[])[1])||b.height;Shadowbox.setup(c,b)})};var S=false,bF;if(document.addEventListener){bF=function(){document.removeEventListener("DOMContentLoaded",bF,false);bc.load()}}else{if(document.attachEvent){bF=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",bF);bc.load()}}}}function aX(){if(S){return}try{document.documentElement.doScroll("left")}catch(a){setTimeout(aX,1);return}bc.load()}function bd(){if(document.readyState==="complete"){return bc.load()}if(document.addEventListener){document.addEventListener("DOMContentLoaded",bF,false);bu.addEventListener("load",bc.load,false)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",bF);bu.attachEvent("onload",bc.load);var a=false;try{a=bu.frameElement===null}catch(b){}if(document.documentElement.doScroll&&a){aX()}}}}bc.load=function(){if(S){return}if(!document.body){return setTimeout(bc.load,13)}S=true;a0();bc.onReady();if(!bc.options.skipSetup){bc.setup()}bc.skin.init()};bc.plugins={};if(navigator.plugins&&navigator.plugins.length){var aH=[];bR(navigator.plugins,function(a,b){aH.push(b.name)});aH=aH.join(",");var bI=aH.indexOf("Flip4Mac")>-1;bc.plugins={fla:aH.indexOf("Shockwave Flash")>-1,qt:aH.indexOf("QuickTime")>-1,wmp:!bI&&aH.indexOf("Windows Media")>-1,f4m:bI}}else{var aO=function(b){var c;try{c=new ActiveXObject(b)}catch(a){}return !!c};bc.plugins={fla:aO("ShockwaveFlash.ShockwaveFlash"),qt:aO("QuickTime.QuickTime"),wmp:aO("wmplayer.ocx"),f4m:false}}var a6=/^(light|shadow)box/i,bE="shadowboxCacheKey",a2=1;bc.cache={};bc.select=function(d){var c=[];if(!d){var b;bR(document.getElementsByTagName("a"),function(g,f){b=f.getAttribute("rel");if(b&&a6.test(b)){c.push(f)}})}else{var e=d.length;if(e){if(typeof d=="string"){if(bc.find){c=bc.find(d)}}else{if(e==2&&typeof d[0]=="string"&&d[1].nodeType){if(bc.find){c=bc.find(d[0],d[1])}}else{for(var a=0;a<e;++a){c[a]=d[a]}}}}else{c.push(d)}}return c};bc.setup=function(a,b){bR(bc.select(a),function(d,c){bc.addCache(c,b)})};bc.teardown=function(a){bR(bc.select(a),function(c,b){bc.removeCache(b)})};bc.addCache=function(b,a){var c=b[bE];if(c==aT){c=a2++;b[bE]=c;bp(b,"click",aJ)}bc.cache[c]=bc.makeObject(b,a)};bc.removeCache=function(a){bg(a,"click",aJ);delete bc.cache[a[bE]];a[bE]=null};bc.getCache=function(b){var a=b[bE];return(a in bc.cache&&bc.cache[a])};bc.clearCache=function(){for(var a in bc.cache){bc.removeCache(bc.cache[a].link)}bc.cache={}};function aJ(a){bc.open(this);if(bc.gallery.length){aQ(a)}}bc.find=(function(){var h=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,g=0,e=Object.prototype.toString,n=false,o=true;[0,0].sort(function(){o=false;return 0});var r=function(u,A,L,J){L=L||[];var H=A=A||document;if(A.nodeType!==1&&A.nodeType!==9){return[]}if(!u||typeof u!=="string"){return L}var t=[],y,F,B,z,v=true,w=q(A),I=u;while((h.exec(""),y=h.exec(I))!==null){I=y[3];t.push(y[1]);if(y[2]){z=y[3];break}}if(t.length>1&&l.exec(u)){if(t.length===2&&k.relative[t[0]]){F=c(t[0]+t[1],A)}else{F=k.relative[t[0]]?[A]:r(t.shift(),A);while(t.length){u=t.shift();if(k.relative[u]){u+=t.shift()}F=c(u,F)}}}else{if(!J&&t.length>1&&A.nodeType===9&&!w&&k.match.ID.test(t[0])&&!k.match.ID.test(t[t.length-1])){var G=r.find(t.shift(),A,w);A=G.expr?r.filter(G.expr,G.set)[0]:G.set[0]}if(A){var G=J?{expr:t.pop(),set:i(J)}:r.find(t.pop(),t.length===1&&(t[0]==="~"||t[0]==="+")&&A.parentNode?A.parentNode:A,w);F=G.expr?r.filter(G.expr,G.set):G.set;if(t.length>0){B=i(F)}else{v=false}while(t.length){var C=t.pop(),D=C;if(!k.relative[C]){C=""}else{D=t.pop()}if(D==null){D=A}k.relative[C](B,D,w)}}else{B=t=[]}}if(!B){B=F}if(!B){throw"Syntax error, unrecognized expression: "+(C||u)}if(e.call(B)==="[object Array]"){if(!v){L.push.apply(L,B)}else{if(A&&A.nodeType===1){for(var s=0;B[s]!=null;s++){if(B[s]&&(B[s]===true||B[s].nodeType===1&&j(A,B[s]))){L.push(F[s])}}}else{for(var s=0;B[s]!=null;s++){if(B[s]&&B[s].nodeType===1){L.push(F[s])}}}}}else{i(B,L)}if(z){r(z,H,L,J);r.uniqueSort(L)}return L};r.uniqueSort=function(s){if(f){n=o;s.sort(f);if(n){for(var t=1;t<s.length;t++){if(s[t]===s[t-1]){s.splice(t--,1)}}}}return s};r.matches=function(t,s){return r(t,null,null,s)};r.find=function(s,A,B){var t,v;if(!s){return[]}for(var w=0,y=k.order.length;w<y;w++){var u=k.order[w],v;if((v=k.leftMatch[u].exec(s))){var z=v[1];v.splice(1,1);if(z.substr(z.length-1)!=="\\"){v[1]=(v[1]||"").replace(/\\/g,"");t=k.find[u](v,A,B);if(t!=null){s=s.replace(k.match[u],"");break}}}}if(!t){t=A.getElementsByTagName("*")}return{set:t,expr:s}};r.filter=function(H,I,D,w){var y=H,B=[],s=I,u,A,t=I&&I[0]&&q(I[0]);while(H&&I.length){for(var J in k.filter){if((u=k.match[J].exec(H))!=null){var z=k.filter[J],C,F;A=false;if(s===B){B=[]}if(k.preFilter[J]){u=k.preFilter[J](u,s,D,B,w,t);if(!u){A=C=true}else{if(u===true){continue}}}if(u){for(var v=0;(F=s[v])!=null;v++){if(F){C=z(F,u,v,s);var G=w^!!C;if(D&&C!=null){if(G){A=true}else{s[v]=false}}else{if(G){B.push(F);A=true}}}}}if(C!==aT){if(!D){s=B}H=H.replace(k.match[J],"");if(!A){return[]}break}}}if(H===y){if(A==null){throw"Syntax error, unrecognized expression: "+H}else{break}}y=H}return s};var k=r.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF-]|\\.)+)(?:\((['"]*)((?:\([^\)]+\)|[^\2\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(s){return s.getAttribute("href")}},relative:{"+":function(s,y){var v=typeof y==="string",t=v&&!/\W/.test(y),A=v&&!t;if(t){y=y.toLowerCase()}for(var w=0,z=s.length,u;w<z;w++){if((u=s[w])){while((u=u.previousSibling)&&u.nodeType!==1){}s[w]=A||u&&u.nodeName.toLowerCase()===y?u||false:u===y}}if(A){r.filter(y,s,true)}},">":function(s,y){var u=typeof y==="string";if(u&&!/\W/.test(y)){y=y.toLowerCase();for(var w=0,z=s.length;w<z;w++){var t=s[w];if(t){var v=t.parentNode;s[w]=v.nodeName.toLowerCase()===y?v:false}}}else{for(var w=0,z=s.length;w<z;w++){var t=s[w];if(t){s[w]=u?t.parentNode:t.parentNode===y}}if(u){r.filter(y,s,true)}}},"":function(u,w,s){var v=g++,y=b;if(typeof w==="string"&&!/\W/.test(w)){var t=w=w.toLowerCase();y=m}y("parentNode",w,v,u,t,s)},"~":function(u,w,s){var v=g++,y=b;if(typeof w==="string"&&!/\W/.test(w)){var t=w=w.toLowerCase();y=m}y("previousSibling",w,v,u,t,s)}},find:{ID:function(u,t,s){if(typeof t.getElementById!=="undefined"&&!s){var v=t.getElementById(u[1]);return v?[v]:[]}},NAME:function(v,s){if(typeof s.getElementsByName!=="undefined"){var w=[],t=s.getElementsByName(v[1]);for(var u=0,y=t.length;u<y;u++){if(t[u].getAttribute("name")===v[1]){w.push(t[u])}}return w.length===0?null:w}},TAG:function(t,s){return s.getElementsByTagName(t[1])}},preFilter:{CLASS:function(v,y,w,z,s,A){v=" "+v[1].replace(/\\/g,"")+" ";if(A){return v}for(var u=0,t;(t=y[u])!=null;u++){if(t){if(s^(t.className&&(" "+t.className+" ").replace(/[\t\n]/g," ").indexOf(v)>=0)){if(!w){z.push(t)}}else{if(w){y[u]=false}}}}return false},ID:function(s){return s[1].replace(/\\/g,"")},TAG:function(s,t){return s[1].toLowerCase()},CHILD:function(t){if(t[1]==="nth"){var s=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(t[2]==="even"&&"2n"||t[2]==="odd"&&"2n+1"||!/\D/.test(t[2])&&"0n+"+t[2]||t[2]);t[2]=(s[1]+(s[2]||1))-0;t[3]=s[3]-0}t[0]=g++;return t},ATTR:function(u,y,w,z,t,s){var v=u[1].replace(/\\/g,"");if(!s&&k.attrMap[v]){u[1]=k.attrMap[v]}if(u[2]==="~="){u[4]=" "+u[4]+" "}return u},PSEUDO:function(t,w,v,y,s){if(t[1]==="not"){if((h.exec(t[3])||"").length>1||/^\w/.test(t[3])){t[3]=r(t[3],null,null,w)}else{var u=r.filter(t[3],w,v,true^s);if(!v){y.push.apply(y,u)}return false}}else{if(k.match.POS.test(t[0])||k.match.CHILD.test(t[0])){return true}}return t},POS:function(s){s.unshift(true);return s}},filters:{enabled:function(s){return s.disabled===false&&s.type!=="hidden"},disabled:function(s){return s.disabled===true},checked:function(s){return s.checked===true},selected:function(s){s.parentNode.selectedIndex;return s.selected===true},parent:function(s){return !!s.firstChild},empty:function(s){return !s.firstChild},has:function(s,t,u){return !!r(u[3],s).length},header:function(s){return/h\d/i.test(s.nodeName)},text:function(s){return"text"===s.type},radio:function(s){return"radio"===s.type},checkbox:function(s){return"checkbox"===s.type},file:function(s){return"file"===s.type},password:function(s){return"password"===s.type},submit:function(s){return"submit"===s.type},image:function(s){return"image"===s.type},reset:function(s){return"reset"===s.type},button:function(s){return"button"===s.type||s.nodeName.toLowerCase()==="button"},input:function(s){return/input|select|textarea|button/i.test(s.nodeName)}},setFilters:{first:function(s,t){return t===0},last:function(t,u,v,s){return u===s.length-1},even:function(s,t){return t%2===0},odd:function(s,t){return t%2===1},lt:function(s,t,u){return t<u[3]-0},gt:function(s,t,u){return t>u[3]-0},nth:function(s,t,u){return u[3]-0===t},eq:function(s,t,u){return u[3]-0===t}},filter:{PSEUDO:function(s,w,v,A){var y=w[1],u=k.filters[y];if(u){return u(s,v,w,A)}else{if(y==="contains"){return(s.textContent||s.innerText||d([s])||"").indexOf(w[3])>=0}else{if(y==="not"){var t=w[3];for(var v=0,z=t.length;v<z;v++){if(t[v]===s){return false}}return true}else{throw"Syntax error, unrecognized expression: "+y}}}},CHILD:function(A,w){var t=w[1],z=A;switch(t){case"only":case"first":while((z=z.previousSibling)){if(z.nodeType===1){return false}}if(t==="first"){return true}z=A;case"last":while((z=z.nextSibling)){if(z.nodeType===1){return false}}return true;case"nth":var y=w[2],B=w[3];if(y===1&&B===0){return true}var u=w[0],C=A.parentNode;if(C&&(C.sizcache!==u||!A.nodeIndex)){var v=0;for(z=C.firstChild;z;z=z.nextSibling){if(z.nodeType===1){z.nodeIndex=++v}}C.sizcache=u}var s=A.nodeIndex-B;if(y===0){return s===0}else{return(s%y===0&&s/y>=0)}}},ID:function(s,t){return s.nodeType===1&&s.getAttribute("id")===t},TAG:function(s,t){return(t==="*"&&s.nodeType===1)||s.nodeName.toLowerCase()===t},CLASS:function(s,t){return(" "+(s.className||s.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(t,v){var w=v[1],z=k.attrHandle[w]?k.attrHandle[w](t):t[w]!=null?t[w]:t.getAttribute(w),s=z+"",u=v[2],y=v[4];return z==null?u==="!=":u==="="?s===y:u==="*="?s.indexOf(y)>=0:u==="~="?(" "+s+" ").indexOf(y)>=0:!y?s&&z!==false:u==="!="?s!==y:u==="^="?s.indexOf(y)===0:u==="$="?s.substr(s.length-y.length)===y:u==="|="?s===y||s.substr(0,y.length+1)===y+"-":false},POS:function(t,w,v,s){var y=w[2],u=k.setFilters[y];if(u){return u(t,v,w,s)}}}};var l=k.match.POS;for(var p in k.match){k.match[p]=new RegExp(k.match[p].source+/(?![^\[]*\])(?![^\(]*\))/.source);k.leftMatch[p]=new RegExp(/(^(?:.|\r|\n)*?)/.source+k.match[p].source)}var i=function(s,t){s=Array.prototype.slice.call(s,0);if(t){t.push.apply(t,s);return t}return s};try{Array.prototype.slice.call(document.documentElement.childNodes,0)}catch(a){i=function(s,t){var v=t||[];if(e.call(s)==="[object Array]"){Array.prototype.push.apply(v,s)}else{if(typeof s.length==="number"){for(var u=0,w=s.length;u<w;u++){v.push(s[u])}}else{for(var u=0;s[u];u++){v.push(s[u])}}}return v}}var f;if(document.documentElement.compareDocumentPosition){f=function(t,u){if(!t.compareDocumentPosition||!u.compareDocumentPosition){if(t==u){n=true}return t.compareDocumentPosition?-1:1}var s=t.compareDocumentPosition(u)&4?-1:t===u?0:1;if(s===0){n=true}return s}}else{if("sourceIndex" in document.documentElement){f=function(t,u){if(!t.sourceIndex||!u.sourceIndex){if(t==u){n=true}return t.sourceIndex?-1:1}var s=t.sourceIndex-u.sourceIndex;if(s===0){n=true}return s}}else{if(document.createRange){f=function(t,v){if(!t.ownerDocument||!v.ownerDocument){if(t==v){n=true}return t.ownerDocument?-1:1}var u=t.ownerDocument.createRange(),w=v.ownerDocument.createRange();u.setStart(t,0);u.setEnd(t,0);w.setStart(v,0);w.setEnd(v,0);var s=u.compareBoundaryPoints(Range.START_TO_END,w);if(s===0){n=true}return s}}}}function d(v){var u="",s;for(var t=0;v[t];t++){s=v[t];if(s.nodeType===3||s.nodeType===4){u+=s.nodeValue}else{if(s.nodeType!==8){u+=d(s.childNodes)}}}return u}(function(){var t=document.createElement("div"),s="script"+(new Date).getTime();t.innerHTML="<a name='"+s+"'/>";var u=document.documentElement;u.insertBefore(t,u.firstChild);if(document.getElementById(s)){k.find.ID=function(y,w,v){if(typeof w.getElementById!=="undefined"&&!v){var z=w.getElementById(y[1]);return z?z.id===y[1]||typeof z.getAttributeNode!=="undefined"&&z.getAttributeNode("id").nodeValue===y[1]?[z]:aT:[]}};k.filter.ID=function(v,y){var w=typeof v.getAttributeNode!=="undefined"&&v.getAttributeNode("id");return v.nodeType===1&&w&&w.nodeValue===y}}u.removeChild(t);u=t=null})();(function(){var s=document.createElement("div");s.appendChild(document.createComment(""));if(s.getElementsByTagName("*").length>0){k.find.TAG=function(y,t){var u=t.getElementsByTagName(y[1]);if(y[1]==="*"){var v=[];for(var w=0;u[w];w++){if(u[w].nodeType===1){v.push(u[w])}}u=v}return u}}s.innerHTML="<a href='#'></a>";if(s.firstChild&&typeof s.firstChild.getAttribute!=="undefined"&&s.firstChild.getAttribute("href")!=="#"){k.attrHandle.href=function(t){return t.getAttribute("href",2)}}s=null})();if(document.querySelectorAll){(function(){var u=r,s=document.createElement("div");s.innerHTML="<p class='TEST'></p>";if(s.querySelectorAll&&s.querySelectorAll(".TEST").length===0){return}r=function(v,w,z,y){w=w||document;if(!y&&w.nodeType===9&&!q(w)){try{return i(w.querySelectorAll(v),z)}catch(A){}}return u(v,w,z,y)};for(var t in u){r[t]=u[t]}s=null})()}(function(){var s=document.createElement("div");s.innerHTML="<div class='test e'></div><div class='test'></div>";if(!s.getElementsByClassName||s.getElementsByClassName("e").length===0){return}s.lastChild.className="e";if(s.getElementsByClassName("e").length===1){return}k.order.splice(1,0,"CLASS");k.find.CLASS=function(v,u,t){if(typeof u.getElementsByClassName!=="undefined"&&!t){return u.getElementsByClassName(v[1])}};s=null})();function m(z,t,u,B,s,C){for(var w=0,y=B.length;w<y;w++){var A=B[w];if(A){A=A[z];var v=false;while(A){if(A.sizcache===u){v=B[A.sizset];break}if(A.nodeType===1&&!C){A.sizcache=u;A.sizset=w}if(A.nodeName.toLowerCase()===t){v=A;break}A=A[z]}B[w]=v}}}function b(z,t,u,B,s,C){for(var w=0,y=B.length;w<y;w++){var A=B[w];if(A){A=A[z];var v=false;while(A){if(A.sizcache===u){v=B[A.sizset];break}if(A.nodeType===1){if(!C){A.sizcache=u;A.sizset=w}if(typeof t!=="string"){if(A===t){v=true;break}}else{if(r.filter(t,[A]).length>0){v=A;break}}}A=A[z]}B[w]=v}}}var j=document.compareDocumentPosition?function(s,t){return s.compareDocumentPosition(t)&16}:function(s,t){return s!==t&&(s.contains?s.contains(t):true)};var q=function(t){var s=(t?t.ownerDocument||t:0).documentElement;return s?s.nodeName!=="HTML":false};var c=function(z,A){var v=[],u="",t,w=A.nodeType?[A]:A;while((t=k.match.PSEUDO.exec(z))){u+=t[0];z=z.replace(k.match.PSEUDO,"")}z=k.relative[z]?z+"*":z;for(var s=0,y=w.length;s<y;s++){r(z,w[s],v)}return r.filter(u,v)};return r})();bc.lang={code:"en",of:"of",loading:"loading",cancel:"Cancel",next:"Next",previous:"Previous",play:"Play",pause:"Pause",close:"Close",errors:{single:'You must install the <a href="{0}">{1}</a> browser plugin to view this content.',shared:'You must install both the <a href="{0}">{1}</a> and <a href="{2}">{3}</a> browser plugins to view this content.',either:'You must install either the <a href="{0}">{1}</a> or the <a href="{2}">{3}</a> browser plugin to view this content.'}};var bt,bw="sb-drag-proxy",bs,aU,bK;function bo(){bs={x:0,y:0,startX:null,startY:null}}function bW(){var a=bc.dimensions;bU(aU.style,{height:a.innerHeight+"px",width:a.innerWidth+"px"})}function be(){bo();var a=["position:absolute","cursor:"+(bc.isGecko?"-moz-grab":"move"),"background-color:"+(bc.isIE?"#fff;filter:alpha(opacity=0)":"transparent")].join(";");bc.appendHTML(bc.skin.body,'<div id="'+bw+'" style="'+a+'"></div>');aU=bN(bw);bW();bp(aU,"mousedown",bh)}function bx(){if(aU){bg(aU,"mousedown",bh);bv(aU);aU=null}bK=null}function bh(b){aQ(b);var a=a8(b);bs.startX=a[0];bs.startY=a[1];bK=bN(bc.player.id);bp(document,"mousemove",bm);bp(document,"mouseup",aV);if(bc.isGecko){aU.style.cursor="-moz-grabbing"}}function bm(f){var c=bc.player,e=bc.dimensions,a=a8(f);var b=a[0]-bs.startX;bs.startX+=b;bs.x=Math.max(Math.min(0,bs.x+b),e.innerWidth-c.width);var d=a[1]-bs.startY;bs.startY+=d;bs.y=Math.max(Math.min(0,bs.y+d),e.innerHeight-c.height);bU(bK.style,{left:bs.x+"px",top:bs.y+"px"})}function aV(){bg(document,"mousemove",bm);bg(document,"mouseup",aV);if(bc.isGecko){aU.style.cursor="-moz-grab"}}bc.img=function(c,b){this.obj=c;this.id=b;this.ready=false;var a=this;bt=new Image();bt.onload=function(){a.height=c.height?parseInt(c.height,10):bt.height;a.width=c.width?parseInt(c.width,10):bt.width;a.ready=true;bt.onload=null;bt=null};bt.src=c.content};bc.img.ext=["bmp","gif","jpg","jpeg","png"];bc.img.prototype={append:function(d,e){var c=document.createElement("img");c.id=this.id;c.src=this.obj.content;c.style.position="absolute";var b,a;if(e.oversized&&bc.options.handleOversize=="resize"){b=e.innerHeight;a=e.innerWidth}else{b=this.height;a=this.width}c.setAttribute("height",b);c.setAttribute("width",a);d.appendChild(c)},remove:function(){var a=bN(this.id);if(a){bv(a)}bx();if(bt){bt.onload=null;bt=null}},onLoad:function(){var a=bc.dimensions;if(a.oversized&&bc.options.handleOversize=="drag"){be()}},onWindowResize:function(){var a=bc.dimensions;switch(bc.options.handleOversize){case"resize":var c=bN(this.id);c.height=a.innerHeight;c.width=a.innerWidth;break;case"drag":if(bK){var b=parseInt(bc.getStyle(bK,"top")),d=parseInt(bc.getStyle(bK,"left"));if(b+this.height<a.innerHeight){bK.style.top=a.innerHeight-this.height+"px"}if(d+this.width<a.innerWidth){bK.style.left=a.innerWidth-this.width+"px"}bW()}break}}};bc.html=function(a,b){this.obj=a;this.id=b;this.height=a.height?parseInt(a.height,10):300;this.width=a.width?parseInt(a.width,10):500};bc.html.prototype={append:function(b,c){var a=document.createElement("div");a.id=this.id;a.className="html";a.innerHTML=this.obj.content;b.appendChild(a)},remove:function(){var a=bN(this.id);if(a){bv(a)}}};var bC=false,a5=[],aN=["sb-nav-close","sb-nav-next","sb-nav-play","sb-nav-pause","sb-nav-previous"],bQ,bM,a4,aR=true;function bf(d,g,k,m,f){var h=(g=="opacity"),l=h?bc.setOpacity:function(o,p){o.style[g]=""+p+"px"};if(m==0||(!h&&!bc.options.animate)||(h&&!bc.options.animateFade)){l(d,k);if(f){f()}return}var j=parseFloat(bc.getStyle(d,g))||0;var i=k-j;if(i==0){if(f){f()}return}m*=1000;var c=bq(),n=bc.ease,a=c+m,b;var e=setInterval(function(){b=bq();if(b>=a){clearInterval(e);e=null;l(d,k);if(f){f()}}else{l(d,j+n((b-c)/m)*i)}},10)}function bV(){bQ.style.height=bc.getWindowSize("Height")+"px";bQ.style.width=bc.getWindowSize("Width")+"px"}function bS(){bQ.style.top=document.documentElement.scrollTop+"px";bQ.style.left=document.documentElement.scrollLeft+"px"}function bl(a){if(a){bR(a5,function(c,b){b[0].style.visibility=b[1]||""})}else{a5=[];bR(bc.options.troubleElements,function(b,c){bR(document.getElementsByTagName(c),function(d,e){a5.push([e,e.style.visibility]);e.style.visibility="hidden"})})}}function aM(b,a){var c=bN("sb-nav-"+b);if(c){c.style.display=a?"":"none"}}function bJ(c,e){var f=bN("sb-loading"),b=bc.getCurrent().player,a=(b=="img"||b=="html");if(c){bc.setOpacity(f,0);f.style.display="block";var d=function(){bc.clearOpacity(f);if(e){e()}};if(a){bf(f,"opacity",1,bc.options.fadeDuration,d)}else{d()}}else{var d=function(){f.style.display="none";bc.clearOpacity(f);if(e){e()}};if(a){bf(f,"opacity",0,bc.options.fadeDuration,d)}else{d()}}}function aK(i){var a=bc.getCurrent();bN("sb-title-inner").innerHTML=a.title||"";var h,l,e,g,k;if(bc.options.displayNav){h=true;var j=bc.gallery.length;if(j>1){if(bc.options.continuous){l=k=true}else{l=(j-1)>bc.current;k=bc.current>0}}if(bc.options.slideshowDelay>0&&bc.hasNext()){g=!bc.isPaused();e=!g}}else{h=l=e=g=k=false}aM("close",h);aM("next",l);aM("play",e);aM("pause",g);aM("previous",k);var f="";if(bc.options.displayCounter&&bc.gallery.length>1){var j=bc.gallery.length;if(bc.options.counterType=="skip"){var b=0,c=j,d=parseInt(bc.options.counterLimit)||0;if(d<j&&d>2){var m=Math.floor(d/2);b=bc.current-m;if(b<0){b+=j}c=bc.current+(d-m);if(c>j){c-=j}}while(b!=c){if(b==j){b=0}f+='<a onclick="Shadowbox.change('+b+');"';if(b==bc.current){f+=' class="sb-counter-current"'}f+=">"+(++b)+"</a>"}}else{f=[bc.current+1,bc.lang.of,j].join(" ")}}bN("sb-counter").innerHTML=f;i()}function a9(a){var c=bN("sb-title-inner"),b=bN("sb-info-inner"),d=0.35;c.style.visibility=b.style.visibility="";if(c.innerHTML!=""){bf(c,"marginTop",0,d)}bf(b,"marginTop",0,d,a)}function br(d,g){var i=bN("sb-title"),f=bN("sb-info"),c=i.offsetHeight,b=f.offsetHeight,a=bN("sb-title-inner"),h=bN("sb-info-inner"),e=(d?0.35:0);bf(a,"marginTop",c,e);bf(h,"marginTop",b*-1,e,function(){a.style.visibility=h.style.visibility="hidden";g()})}function bO(c,a,d,e){var f=bN("sb-wrapper-inner"),b=(d?bc.options.resizeDuration:0);bf(a4,"top",a,b);bf(f,"height",c,b,e)}function by(c,a,d,e){var b=(d?bc.options.resizeDuration:0);bf(a4,"left",a,b);bf(a4,"width",c,b,e)}function bG(g,d){var b=bN("sb-body-inner"),g=parseInt(g),d=parseInt(d),e=a4.offsetHeight-b.offsetHeight,f=a4.offsetWidth-b.offsetWidth,i=bM.offsetHeight,h=bM.offsetWidth,a=parseInt(bc.options.viewportPadding)||20,c=(bc.player&&bc.options.handleOversize!="drag");return bc.setDimensions(g,d,i,h,e,f,a,c)}var ba={};ba.markup='<div id="sb-container"><div id="sb-overlay"></div><div id="sb-wrapper"><div id="sb-title"><div id="sb-title-inner"></div></div><div id="sb-wrapper-inner"><div id="sb-body"><div id="sb-body-inner"></div><div id="sb-loading"><div id="sb-loading-inner"><span>{loading}</span></div></div></div></div><div id="sb-info"><div id="sb-info-inner"><div id="sb-counter"></div><div id="sb-nav"><a id="sb-nav-close" title="{close}" onclick="Shadowbox.close()"></a><a id="sb-nav-next" title="{next}" onclick="Shadowbox.next()"></a><a id="sb-nav-play" title="{play}" onclick="Shadowbox.play()"></a><a id="sb-nav-pause" title="{pause}" onclick="Shadowbox.pause()"></a><a id="sb-nav-previous" title="{previous}" onclick="Shadowbox.previous()"></a></div></div></div></div></div>';ba.options={animSequence:"sync",counterLimit:10,counterType:"default",displayCounter:true,displayNav:true,fadeDuration:0.35,initialHeight:160,initialWidth:320,modal:false,overlayColor:"#000",overlayOpacity:0.5,resizeDuration:0.35,showOverlay:true,troubleElements:["select","object","embed","canvas"]};ba.init=function(){bc.appendHTML(document.body,aL(ba.markup,bc.lang));ba.body=bN("sb-body-inner");bQ=bN("sb-container");bM=bN("sb-overlay");a4=bN("sb-wrapper");if(!aG){bQ.style.position="absolute"}if(!aW){var c,b,d=/url\("(.*\.png)"\)/;bR(aN,function(f,e){c=bN(e);if(c){b=bc.getStyle(c,"backgroundImage").match(d);if(b){c.style.backgroundImage="none";c.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true,src="+b[1]+",sizingMethod=scale);"}}})}var a;bp(bu,"resize",function(){if(a){clearTimeout(a);a=null}if(bz){a=setTimeout(ba.onWindowResize,10)}})};ba.onOpen=function(b,a){aR=false;bQ.style.display="block";bV();var c=bG(bc.options.initialHeight,bc.options.initialWidth);bO(c.innerHeight,c.top);by(c.width,c.left);if(bc.options.showOverlay){bM.style.backgroundColor=bc.options.overlayColor;bc.setOpacity(bM,0);if(!bc.options.modal){bp(bM,"click",bc.close)}bC=true}if(!aG){bS();bp(bu,"scroll",bS)}bl();bQ.style.visibility="visible";if(bC){bf(bM,"opacity",bc.options.overlayOpacity,bc.options.fadeDuration,a)}else{a()}};ba.onLoad=function(b,a){bJ(true);while(ba.body.firstChild){bv(ba.body.firstChild)}br(b,function(){if(!bz){return}if(!b){a4.style.visibility="visible"}aK(a)})};ba.onReady=function(a){if(!bz){return}var d=bc.player,c=bG(d.height,d.width);var b=function(){a9(a)};switch(bc.options.animSequence){case"hw":bO(c.innerHeight,c.top,true,function(){by(c.width,c.left,true,b)});break;case"wh":by(c.width,c.left,true,function(){bO(c.innerHeight,c.top,true,b)});break;default:by(c.width,c.left,true);bO(c.innerHeight,c.top,true,b)}};ba.onShow=function(a){bJ(false,a);aR=true};ba.onClose=function(){if(!aG){bg(bu,"scroll",bS)}bg(bM,"click",bc.close);a4.style.visibility="hidden";var a=function(){bQ.style.visibility="hidden";bQ.style.display="none";bl(true)};if(bC){bf(bM,"opacity",0,bc.options.fadeDuration,a)}else{a()}};ba.onPlay=function(){aM("play",false);aM("pause",true)};ba.onPause=function(){aM("pause",false);aM("play",true)};ba.onWindowResize=function(){if(!aR){return}bV();var a=bc.player,b=bG(a.height,a.width);by(b.width,b.left);bO(b.innerHeight,b.top);if(a.onWindowResize){a.onWindowResize()}};bc.skin=ba;bu.Shadowbox=bc})(window);